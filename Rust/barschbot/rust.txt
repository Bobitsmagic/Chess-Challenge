benchmark results: 

//bitboard, seperate legallity check (piece count on check)

Depth: 0 Pos: 1 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
63.2µs
Depth: 1 Pos: 20 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
196.5µs
Depth: 2 Pos: 400 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
326.1µs
Depth: 3 Pos: 8902 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
738.3µs
Depth: 4 Pos: 197281 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
7.915ms
Depth: 5 Pos: 4865609 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
175.6058ms
Depth: 6 Pos: 119060324 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
4.6509624s
Depth: 7 Pos: 3195901860 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
119.1389543s

Depth: 0 Pos: 1 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
53.3µs
Depth: 1 Pos: 48 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
183.2µs
Depth: 2 Pos: 2039 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
397.5µs
Depth: 3 Pos: 97862 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
4.062ms
Depth: 4 Pos: 4085603 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
162.7774ms
Depth: 5 Pos: 193690690 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
7.4024712s
Depth: 6 Pos: 8031647685 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
336.7298049s

//bitboard direct legal moves

Depth: 0 Pos: 1 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
59.2µs
Depth: 1 Pos: 20 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
186.4µs
Depth: 2 Pos: 400 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
316µs
Depth: 3 Pos: 8902 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
715.5µs
Depth: 4 Pos: 197281 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
6.1864ms
Depth: 5 Pos: 4865609 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
143.98ms
Depth: 6 Pos: 119060324 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
3.3529014s
Depth: 7 Pos: 3195901860 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
93.5846442s

Depth: 0 Pos: 1 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
74.1µs
Depth: 1 Pos: 48 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
259.3µs
Depth: 2 Pos: 2039 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
495.1µs
Depth: 3 Pos: 97862 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
3.3425ms
Depth: 4 Pos: 4085603 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
102.9654ms
Depth: 5 Pos: 193690690 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
5.3839378s
Depth: 6 Pos: 8031647685 caps: 0 ep: 0 castles: 0 prom: 0 checks: 0 double checks: 0
205.5851216s

//Perft
Checking all fens
Index: 1
Depth: 0 -> 1
Depth: 1 -> 20
Depth: 2 -> 400
Depth: 3 -> 8902
Depth: 4 -> 197281
Depth: 5 -> 4865609
Depth: 6 -> 119060324
Depth: 7 -> 3195901860
Time: 91.5513966s Ratio: 36264 k boards per second
Index: 2
Depth: 0 -> 1
Depth: 1 -> 48
Depth: 2 -> 2039
Depth: 3 -> 97862
Depth: 4 -> 4085603
Depth: 5 -> 193690690
Depth: 6 -> 8031647685
Time: 221.1581019s Ratio: 37211 k boards per second
Index: 3
Depth: 0 -> 1
Depth: 1 -> 14
Depth: 2 -> 191
Depth: 3 -> 2812
Depth: 4 -> 43238
Depth: 5 -> 674624
Depth: 6 -> 11030083
Depth: 7 -> 178633661
Depth: 8 -> 3009794393
Time: 89.0205377s Ratio: 35948 k boards per second
Index: 4
Depth: 0 -> 1
Depth: 1 -> 6
Depth: 2 -> 264
Depth: 3 -> 9467
Depth: 4 -> 422333
Depth: 5 -> 15833292
Depth: 6 -> 706045033
Time: 19.9881329s Ratio: 36137 k boards per second
Index: 5
Depth: 0 -> 1
Depth: 1 -> 44
Depth: 2 -> 1486
Depth: 3 -> 62379
Depth: 4 -> 2103487
Depth: 5 -> 89941194
Time: 2.2532351s Ratio: 40882 k boards per second
Index: 6
Depth: 0 -> 1
Depth: 1 -> 46
Depth: 2 -> 2079
Depth: 3 -> 89890
Depth: 4 -> 3894594
Depth: 5 -> 164075551
Depth: 6 -> 6923051137
Time: 182.7890367s Ratio: 38793 k boards per second

//Full bitboard (except ep)
Checking all fens
Index: 1
Depth: 0 -> 1
Depth: 1 -> 20
Depth: 2 -> 400
Depth: 3 -> 8902
Depth: 4 -> 197281
Depth: 5 -> 4865609
Depth: 6 -> 119060324
Depth: 7 -> 3195901860
Time: 75.4916039s Ratio: 43979 k boards per second
Index: 2
Depth: 0 -> 1
Depth: 1 -> 48
Depth: 2 -> 2039
Depth: 3 -> 97862
Depth: 4 -> 4085603
Depth: 5 -> 193690690
Depth: 6 -> 8031647685
Time: 199.4117665s Ratio: 41269 k boards per second
Index: 3
Depth: 0 -> 1
Depth: 1 -> 14
Depth: 2 -> 191
Depth: 3 -> 2812
Depth: 4 -> 43238
Depth: 5 -> 674624
Depth: 6 -> 11030083
Depth: 7 -> 178633661
Depth: 8 -> 3009794393
Time: 85.8061101s Ratio: 37295 k boards per second
Index: 4
Depth: 0 -> 1
Depth: 1 -> 6
Depth: 2 -> 264
Depth: 3 -> 9467
Depth: 4 -> 422333
Depth: 5 -> 15833292
Depth: 6 -> 706045033
Time: 17.8358379s Ratio: 40499 k boards per second
Index: 5
Depth: 0 -> 1
Depth: 1 -> 44
Depth: 2 -> 1486
Depth: 3 -> 62379
Depth: 4 -> 2103487
Depth: 5 -> 89941194
Time: 2.0522354s Ratio: 44887 k boards per second
Index: 6
Depth: 0 -> 1
Depth: 1 -> 46
Depth: 2 -> 2079
Depth: 3 -> 89890
Depth: 4 -> 3894594
Depth: 5 -> 164075551
Depth: 6 -> 6923051137
Time: 163.6544141s Ratio: 43329 k boards per second